@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
	img,
	svg,
	video,
	canvas,
	audio,
	iframe,
	embed,
	object {
		@apply box-border bg-cover bg-none block align-middle h-auto max-w-full;
		content-visibility: auto;
	}

	img {
		@apply rounded-md p-4;
		box-shadow: var(--shadow);
		margin-block-end: 1rem;
		margin-block-start: 1rem;
	}

	:root[theme='light'] {
		img {
			--shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);
		}
	}

	:root[theme='dark'] {
		img {
			--shadow: 0 0 0 1px rgba(255, 255, 255, 0.1),
				0 1px 3px rgba(255, 255, 255, 0.1);
		}
	}

	blockquote {
		border-left: var(--block-border-width) solid var(--accent);
		margin-left: var(--block-indent);
		@apply pl-4 border-l-4 border-accent border-solid border-r-0 border-t-0 border-b-0;
	}

	hr {
		margin: 3rem var(--block-indent);
	}

	p {
		@apply text-lg leading-7;
	}

	li {
		@apply mt-1;
	}

	a {
		@apply relative no-underline text-fg;

		&:not(.not-fancy) {
			@apply border-b-fg border-b-2 border-dotted hover:text-accent hover:border-b-accent hover:border-b-2 hover:border-solid border-r-0 border-l-0 border-t-0;

			&:hover svg {
				fill: var(--accent) !important;
			}
		}
	}

	main,
	article {
		a[rel*='noopener']:not([href*='https://uncenter.org'], .no-external-link)::after
		{
			mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='external-link-icon' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z'/%3E%3Cpath fill-rule='evenodd' d='M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z'/%3E%3C/svg%3E");
			mask-position: center;
			mask-repeat: no-repeat;
			mask-size: contain;
			@apply bg-fg content-[''] inline-block h-[11px] w-[11px] ml-1 mr-0.5;
		}

		h2,
		h3,
		h4,
		h5,
		h6 {
			@apply leading-[1.4];
		}

		h2 {
			@apply font-semibold pb-[3px];
		}

		h3 {
			@apply italic pb-px;
		}

		h2 a.anchor::before,
		h3 a.anchor::before {
			@apply absolute w-12 content-['ยง'] text-accent transition-[color] duration-[0.2s] ease-[ease] text-center opacity-0 -left-10;
		}

		h2 a.anchor:hover::before,
		h3 a.anchor:hover::before {
			@apply opacity-100;
		}
	}

	kbd {
		@apply border border-[color:var(--kbd-border-color)] bg-transparent text-[80%] px-1 py-0.5 rounded-sm border-solid;
	}

	pre.shiki code {
		@apply font-mono;
	}

	.checklist-item label {
		@apply ml-1;
	}

	.toc {
		@apply px-0 py-2;
		+ p {
			@apply mt-0;
		}
	}

	h1.hidden#title + p {
		@apply mt-0;
	}

	@media (min-width: 1024px) {
		h1.hidden#title + p {
			@apply mt-[unset];
		}
	}
}

@layer utilities {
	.wrap-anywhere {
		overflow-wrap: anywhere;
	}
	.decoration-no-skip {
		text-decoration-skip-ink: none;
	}
}

---
eleventyComputed:
  ogPreviewImage: "{{ meta.url }}/previews/{{ title | slugify }}.png"
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ title }} &middot; {{ meta.name }}</title>

        <link rel="stylesheet" href="/assets/styles.css?v={{ gitRev }}">
        <style>
            {{inlined.css | safe}}
        </style>
        <link rel="preload" as="font" type="font/woff2" href="/assets/fonts/GeneralSans-Variable.woff2" crossorigin="anonymous">
        <script defer data-website-id="{{ meta.analytics.websiteId }}" data-domains="{{ meta.domain }}" src="{{ meta.analytics.url }}/{{ meta.analytics.trackerScript }}.js"></script>

        <meta name="author" content="{{ meta.name }}">
        <meta name="description" content="{% if description %}{{ description }}{% else %}{{ meta.description }}{% endif %}">
        <meta name="generator" content="{{ eleventy.generator }}">

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=20230522">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=20230522">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=20230522">
        <link rel="manifest" href="/site.webmanifest?v=20230522">
        <link rel="mask-icon" href="/safari-pinned-tab.svg?v=20230522" color="#5bbad5">
        <link rel="shortcut icon" href="/favicon.ico?v=20230522">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <meta name="view-transition" content="same-origin">

        <link href="https://github.com/{{ meta.github.username }}" rel="me">
        <link href="https://{{ meta.social.mastodon.instance }}/@{{ meta.social.mastodon.username }}" rel="me">

        <link rel="canonical" href="{{ meta.url }}{{ page.url }}">
        <link rel="alternate" type="application/rss+xml" href="{{ meta.url }}/feed.xml">

        <meta property="og:type" content="website"/>
        <meta property="og:title" content="{{ title }} &middot; {{ meta.name }}"/>
        <meta property="og:description" content="{% if description %}{{ description }}{% else %}{{ meta.description }}{% endif %}"/>
        <meta property="og:image" content="{{ ogPreviewImage }}"/>

        <meta name="twitter:card" content="summary_large_image"/>
        {# <meta name="twitter:creator" content="@uncenter"/> #}
        <meta name="twitter:title" content="{{ title }} &middot; {{ meta.name }}"/>
        <meta name="twitter:image" content="{{ ogPreviewImage }}"/>

        <script>
            {{ inlined.js.before | safe }}
        </script>
    </head>
    <body class="bg-bg text-fg font-display max-w-[130ch] mx-auto px-6 pt-16 pb-8">
        {{ content | safe }}
    </body>
    <script>
        function loadGiscus() {
            if (!document.querySelector('#comments')) 
                return;
            let giscusAttributes = {
                src: 'https://giscus.app/client.js',
                'data-repo': '{{ meta.github.username }}/{{ meta.github.repo }}',
                'data-repo-id': 'R_kgDOHSjhjQ',
                'data-category-id': 'DIC_kwDOHSjhjc4CTQUr',
                'data-mapping': 'title',
                'data-reactions-enabled': '1',
                'data-emit-metadata': '0',
                'data-input-position': 'top',
                'data-theme': document
                    .documentElement
                    .getAttribute('theme'),
                'data-lang': 'en',
                crossorigin: 'anonymous',
                async: ''
            };
            let giscusScript = document.createElement('script');
            Object
                .entries(giscusAttributes)
                .forEach(([key, value]) => giscusScript.setAttribute(key, value),);
            document
                .querySelector('#comments')
                .innerHTML = '';
            document
                .querySelector('#comments')
                .appendChild(giscusScript);
        }
        {{ inlined.js.after | safe }}
    </script>
</html>